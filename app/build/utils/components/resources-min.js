angular.module("musicApp.resources",[]).factory("globalData",["$http",function(t){return{url_api:"https://api.spotify.com",url_token:"https://accounts.spotify.com/api/token",client_id:"c9557aed41e6498f959c37e99a986da5",client_key:"28c47f8c14a74d70ae3133bc928fd020",limitSearch:8,offsetAlbums:0,offsetArtists:0,offsetTracks:0,request:function(s,e,a,n,i,r){t({url:s,method:e||"GET",data:a,headers:n,withCredentials:!1,eventHandlers:{progress:r}}).then(function(t){i.call(t)},function(t){console.log("Something went wrong")})},get_albums_by_name:function(t,s,e){new_name=encodeURI(t,"UTF-8"),url=this.url_api+"/v1/search?q="+new_name+"&type=album&limit="+this.limitSearch+"&offset="+this.offsetAlbums,this.request(url,"GET",{},{},s,e)},get_album_by_id:function(t,s,e){new_name=encodeURI(t,"UTF-8"),url=this.url_api+"/v1/albums/"+new_name,this.request(url,"GET",{},{},s,e)},get_artists_by_name:function(t,s,e){new_name=encodeURI(t,"UTF-8"),url=this.url_api+"/v1/search?q="+new_name+"&type=artist&limit="+this.limitSearch+"&offset="+this.offsetArtists,this.request(url,"GET",{},{},s,e)},get_artist_by_id:function(t,s,e){new_name=encodeURI(t,"UTF-8"),url=this.url_api+"/v1/artists/"+new_name,this.request(url,"GET",{},{},s,e)},get_playlist_by_name:function(t,s,e){new_name=encodeURI(t,"UTF-8"),url=this.url_api+"/v1/search?q="+new_name+"&type=playlist&limit="+this.limitSearch,this.request(url,"GET",{},{},s,e)},get_tracks_by_name:function(t,s,e){new_name=encodeURI(t,"UTF-8"),url=this.url_api+"/v1/search?q="+new_name+"&type=track&limit="+this.limitSearch+"&offset="+this.offsetTracks,this.request(url,"GET",{},{},s,e)},get_track_by_id:function(t,s,e){new_name=encodeURI(t,"UTF-8"),url=this.url_api+"/v1/tracks/"+new_name,this.request(url,"GET",{},{},s,e)},get_tracks_by_album:function(t,s,e){new_name=encodeURI(t,"UTF-8"),url=this.url_api+"/v1/albums/"+new_name+"/tracks",this.request(url,"GET",{},{},s,e)},get_albums_by_artist:function(t,s,e){new_name=encodeURI(t,"UTF-8"),url=this.url_api+"/v1/artists/"+new_name+"/albums",this.request(url,"GET",{},{},s,e)},get_top_tracks_by_artist:function(t,s,e){new_name=encodeURI(t,"UTF-8"),url=this.url_api+"/v1/artists/"+new_name+"/top-tracks",this.request(url,"GET",{},{},s,e)},albums_info:function(t){this.json_data={},this.call=function(s){200==s.status?this.json_data=s.data.albums.items:console.log("Something went wrong, status: "+response_status),t&&t(s)}},tracks_info:function(t){this.json_data={},this.call=function(s){200==s.status?this.json_data=s.data.tracks.items:console.log("Something went wrong, status: "+response_status),t&&t(s)}},artists_info:function(t){this.json_data={},this.call=function(s){200==s.status?this.json_data=s.data.artists.items:console.log("Something went wrong, status: "+response_status),t&&t(s)}},playlists_info:new function(){this.json_data={},this.call=function(t){200==t.status?this.json_data=t.data.playlists.items:console.log("Something went wrong, status: "+response_status)}},search_item:function(t,s,e){function a(){(i+=1)>=3&&(n.results={albums:r,artists:u,tracks:o},e&&e(n.results))}var n=this;if(null!=t&&0!=t.length){var i=0,r=new n.albums_info(a),u=new n.artists_info(a),o=new n.tracks_info(a);this.get_albums_by_name(t,r,s),this.get_artists_by_name(t,u,s),this.get_tracks_by_name(t,o,s)}},results:{albums:{json_data:[]},artists:{json_data:[]},tracks:{json_data:[]}},search:function(t,s,e){function a(){n.results[t]=i}var n=this;if("artists"==t){var i=new n.artists_info(a);this.get_artists_by_name(s,i,e)}else if("tracks"==t){var i=new n.tracks_info(a);this.get_tracks_by_name(s,i,e)}else if("albums"==t){var i=new n.albums_info(a);this.get_albums_by_name(s,i,e)}}}}]);